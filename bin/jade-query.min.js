jq={compiled:{},textTransform:function(a){var b=a.split("\n"),c=[];b.forEach(function(a){""!==a.trim()&&c.push(a)});var d=/^(\W*)\w/.exec(c[0])[1],e=new RegExp("^"+d),f=[];return c.forEach(function(a){f.push(a.replace(e,""))}),f.join("\n")},rebuild:function a(b){if(b){if(0===$("#"+b).length)throw new Error("Element with ID: "+b+" doesn't exist");$("#"+b).hide(),jq.compiled[b]||(jq.compiled[b]={}),jq.compiled[b].templ=jade.compile(jq.textTransform($("#"+b).html())),console.debug("Compiled jade element "+b),0===$("#jade_"+b).length&&$("#"+b).after("<div id='jade_"+b+"'></div>");try{jq.reapply(b)}catch(c){console.warn("Couldn't display jade with id:",b),console.warn("Probably needs some data")}return jq.compiled[b].templ}$("jade").each(function(c,d){b=$(d).attr("id"),b?a($(d).attr("id")):(console.error("jade element doesn't contain id, it will be ignored"),console.debug("this one:",d))})},reapply:function b(a,c){if(a){if(0===$("#"+a).length)throw new Error("Element with ID: "+a+" doesn't exist");jq.compiled[a]||jq.rebuild(a);var d=jq.compiled[a].templ;"undefined"!=typeof c&&(jq.compiled[a].data=c),$("#jade_"+a).html(d(jq.compiled[a].data))}else $("jade").each(function(a,d){b($(d).attr("id"),c)})}},$(document).ready(function(){jq.rebuild()});